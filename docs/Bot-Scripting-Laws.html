<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Bot.Scripting.Laws</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Bot-Scripting-Laws.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Bot.Scripting.Laws</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Forbid characters</a><ul><li><a href="#g:2">Settings</a></li><li><a href="#g:3">Logic</a></li></ul></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Auto-enforce rules like not allowing users to have certain characters
in their nick.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:callbacks">callbacks</a> :: [<a href="Bot-Msg.html#t:SEvent">SEvent</a> -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()]</li><li class="src short"><a href="#v:channels">channels</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [<a href="Bot-Msg.html#t:Channel">Channel</a>]</li><li class="src short"><a href="#v:forbiddenChars">forbiddenChars</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [Char]</li><li class="src short"><a href="#v:graceOffences">graceOffences</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> Int</li><li class="src short"><a href="#v:graceTime">graceTime</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> Int</li><li class="src short"><a href="#v:offendersL">offendersL</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [(String, Int)]</li><li class="src short"><a href="#v:exceptionsL">exceptionsL</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [String]</li><li class="src short"><a href="#v:warningMessage">warningMessage</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> String</li><li class="src short"><a href="#v:listenNick">listenNick</a> :: <a href="Bot-Msg.html#t:SEvent">SEvent</a> -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()</li><li class="src short"><a href="#v:listenJoin">listenJoin</a> :: <a href="Bot-Msg.html#t:SEvent">SEvent</a> -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()</li><li class="src short"><a href="#v:handleNickEv">handleNickEv</a> :: <a href="Bot-Msg.html#t:Channel">Channel</a> -&gt; String -&gt; String -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()</li><li class="src short"><a href="#v:grace">grace</a> :: <a href="Bot-Msg.html#t:Channel">Channel</a> -&gt; String -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()</li><li class="src short"><a href="#v:punish">punish</a> :: <a href="Bot-Msg.html#t:Channel">Channel</a> -&gt; String -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:callbacks" class="def">callbacks</a> :: [<a href="Bot-Msg.html#t:SEvent">SEvent</a> -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> ()] <a href="#v:callbacks" class="selflink">#</a></p><div class="doc"><p>Event hooks</p></div></div><h1 id="g:1">Forbid characters</h1><h2 id="g:2">Settings</h2><div class="top"><p class="src"><a id="v:channels" class="def">channels</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [<a href="Bot-Msg.html#t:Channel">Channel</a>] <a href="#v:channels" class="selflink">#</a></p><div class="doc"><p>Channels to operate in.</p></div></div><div class="top"><p class="src"><a id="v:forbiddenChars" class="def">forbiddenChars</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [Char] <a href="#v:forbiddenChars" class="selflink">#</a></p><div class="doc"><p>Characters to forbid users having in their nicks.</p></div></div><div class="top"><p class="src"><a id="v:graceOffences" class="def">graceOffences</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> Int <a href="#v:graceOffences" class="selflink">#</a></p><div class="doc"><p>Number of prior offences to allow before instakicking the offender.</p></div></div><div class="top"><p class="src"><a id="v:graceTime" class="def">graceTime</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> Int <a href="#v:graceTime" class="selflink">#</a></p><div class="doc"><p>Time to wait before kicking the offender, if they're in grace.</p></div></div><div class="top"><p class="src"><a id="v:offendersL" class="def">offendersL</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [(String, Int)] <a href="#v:offendersL" class="selflink">#</a></p><div class="doc"><p>List of hosts, and numbers of offences.</p></div></div><div class="top"><p class="src"><a id="v:exceptionsL" class="def">exceptionsL</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> [String] <a href="#v:exceptionsL" class="selflink">#</a></p><div class="doc"><p>Exception nicks to allow.</p></div></div><div class="top"><p class="src"><a id="v:warningMessage" class="def">warningMessage</a> :: <a href="Bot-Bot.html#t:PersistentKey">PersistentKey</a> String <a href="#v:warningMessage" class="selflink">#</a></p><div class="doc"><p>Message to send an offender when in grace.</p></div></div><h2 id="g:3">Logic</h2><div class="top"><p class="src"><a id="v:listenNick" class="def">listenNick</a> :: <a href="Bot-Msg.html#t:SEvent">SEvent</a> -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> () <a href="#v:listenNick" class="selflink">#</a></p><div class="doc"><p>Listen for a nick change event. These don't come associated with a channel,
 so we WHOIS lookup the user in question to find all the channels they're in. We then
 see whether there are any that are in our <code><a href="Bot-Scripting-Laws.html#v:channels">channels</a></code> list, calling <code><a href="Bot-Scripting-Laws.html#v:handleNickEv">handleNickEv</a></code>
 if so.</p></div></div><div class="top"><p class="src"><a id="v:listenJoin" class="def">listenJoin</a> :: <a href="Bot-Msg.html#t:SEvent">SEvent</a> -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> () <a href="#v:listenJoin" class="selflink">#</a></p><div class="doc"><p>Listen for a join event, checking whether the channel is in our <code><a href="Bot-Scripting-Laws.html#v:channels">channels</a></code> list and
 calling <code><a href="Bot-Scripting-Laws.html#v:handleNickEv">handleNickEv</a></code> if so.</p></div></div><div class="top"><p class="src"><a id="v:handleNickEv" class="def">handleNickEv</a> :: <a href="Bot-Msg.html#t:Channel">Channel</a> -&gt; String -&gt; String -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> () <a href="#v:handleNickEv" class="selflink">#</a></p><div class="doc"><p>'handleNickEv ch newnick host': Handle a nick event in the given channel <code>ch</code>.
 The user with nick <code>newnick</code> and host <code><a href="Bot-Msg.html#v:host">host</a></code> has changed nicks or joined the channel.
 Check if their nick contains a forbidden character, and if so, deal with it - look up
 the number of offences they've already made (by their host), warning them if they're
 under the threshold for instakick (<code><a href="Bot-Scripting-Laws.html#v:graceOffences">graceOffences</a></code>) and instakicking them if they're over.</p></div></div><div class="top"><p class="src"><a id="v:grace" class="def">grace</a> :: <a href="Bot-Msg.html#t:Channel">Channel</a> -&gt; String -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> () <a href="#v:grace" class="selflink">#</a></p><div class="doc"><p>Warn a user, and set a timer to kick them soon.</p></div></div><div class="top"><p class="src"><a id="v:punish" class="def">punish</a> :: <a href="Bot-Msg.html#t:Channel">Channel</a> -&gt; String -&gt; <a href="Bot-Bot.html#t:Bot">Bot</a> () <a href="#v:punish" class="selflink">#</a></p><div class="doc"><p>Kick a user.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>